{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { messageError } from '../main';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst MY_KEY = '48798537-0207cfb0467814d90ddbd436c';\n\nexport async function fetchImages(userValue, pageNumber) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: MY_KEY,\n        q: userValue,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: pageNumber,\n        per_page: 40,\n      },\n    });\n\n    if (!response.data || response.data.hits.length === 0) {\n      iziToast.error(messageError);\n      return;\n    }\n    return response.data;\n  } catch (error) {\n    iziToast.error(messageError);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst ul = document.querySelector('.gallery-list');\n\nfunction imageTemplate(image) {\n  const {\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = image;\n  return `<li class=\"img-list-item\">\n  <div class=\"image-container\">\n  <a  href=\"${largeImageURL}\">\n    <img\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n    />\n  </a>\n <ul class=\"image-descript\">\n  <li class=\"descript-item\">\n  <p class=\"descript-text\">Likes</p>\n   <p class=\"descript-value\">${likes}</p>\n  </li>\n<li class=\"descript-item\">\n  <p class=\"descript-text\">Views</p>\n   <p class=\"descript-value\">${views}</p>\n  </li>\n<li class=\"descript-item\">\n  <p class=\"descript-text\">Comments</p>\n   <p class=\"descript-value\">${comments}</p>\n  </li>\n  <li class=\"descript-item\">\n  <p class=\"descript-text\">Downloads</p>\n   <p class=\"descript-value\">${downloads}</p>\n  </li>\n  </ul>\n  </div>\n</li>`;\n}\n\nfunction imagesTemplate(images) {\n  return images.map(imageTemplate).join('');\n}\n\nexport function renderImage(images) {\n  ul.insertAdjacentHTML('beforeend', imagesTemplate(images));\n  lightbox.refresh();\n}\n\n\nconst lightbox = new SimpleLightbox('.gallery-list a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImage } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  ul: document.querySelector('.gallery-list'),\n  input: document.querySelector('.input-img'),\n  loader: document.querySelector('.loader'),\n  loadButton: document.querySelector('.button-load'),\n};\n\nexport const messageError = {\n  message:\n    'Sorry, there are no images matching your search query. Please try again!',\n  position: 'topRight',\n  backgroundColor: '#ef4040',\n  messageColor: 'white',\n  progressBar: false,\n  displayMode: 'replace',\n  maxWidth: '300px',\n};\n\nconst messageWarning = {\n  message: 'Please enter a search term!',\n  position: 'topRight',\n  backgroundColor: '#ef4040',\n  messageColor: 'white',\n  progressBar: false,\n  displayMode: 'replace',\n};\n\nconst messageInfo = {\n  message: \"We're sorry, but you've reached the end of search results.\",\n  position: 'bottomCenter',\n  backgroundColor: 'white',\n  messageColor: 'black',\n  progressBar: false,\n  displayMode: 'replace',\n};\n\nfunction showLoader() {\n  refs.loader.style.display = 'flex';\n}\n\nfunction hideLoader() {\n  refs.loader.style.display = 'none';\n}\n\nfunction showBtnMoreLoad() {\n  refs.loadButton.style.display = 'flex';;\n}\n\nfunction hideBtnMoreLoad() {\n  refs.loadButton.style.display = 'none';\n}\n\nfunction checkBtnStatus() {\n  const per_page = 40;\n  const maxPage = Math.ceil(totalHits / per_page);\n\n  if (pageNumber >= maxPage) {\n    hideBtnMoreLoad();\n    iziToast.info(messageInfo);\n  } else {\n    showBtnMoreLoad();\n  }\n}\n\nlet userValue = '';\nlet pageNumber = 1;\nlet totalHits = 0;\n\nrefs.form.addEventListener('submit', async event => {\n  event.preventDefault();\n  userValue = refs.input.value.trim();\n  pageNumber = 1;\n\n  if (userValue === '') {\n    iziToast.warning(messageWarning);\n    return;\n  }\n\n  showLoader();\n  refs.ul.innerHTML = '';\n\n  try {\n    const images = await fetchImages(userValue, pageNumber);\n    if (!images) {\n      hideLoader();\n      return;\n    }\n\n    totalHits = images.totalHits;\n\n    renderImage(images.hits);\n    hideLoader();\n    checkBtnStatus();\n    event.target.reset();\n  } catch (error) {\n    hideLoader();\n    hideBtnMoreLoad();\n    iziToast.error(messageError);\n    throw error;\n  }\n});\n\nrefs.loadButton.addEventListener('click', async () => {\n  pageNumber += 1;\n  checkBtnStatus();\n  showLoader();\n  try {\n    const images = await fetchImages(userValue, pageNumber);\n    renderImage(images.hits);\n    hideLoader();\n    scroll();\n  } catch (error) {\n    hideLoader();\n    iziToast.error(messageError);\n  }\n});\n\nfunction scroll() {\n  const image = document.querySelector('.gallery-list li');\n  if (image) {\n    const cardSize = image.getBoundingClientRect();\n    const scrollHeight = cardSize.height * 2;\n    window.scrollBy({\n      top: scrollHeight,\n      left: 0,\n      behavior: 'smooth',\n    });\n  }\n}\n"],"names":["BASE_URL","MY_KEY","fetchImages","userValue","pageNumber","response","axios","iziToast","messageError","error","ul","imageTemplate","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemplate","images","renderImage","lightbox","SimpleLightbox","refs","messageWarning","messageInfo","showLoader","hideLoader","showBtnMoreLoad","hideBtnMoreLoad","checkBtnStatus","maxPage","totalHits","event","scroll","scrollHeight"],"mappings":"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"}